{"id":"HBKg","dependencies":[{"name":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/package.json","includedInParent":true,"mtime":1647611995497},{"name":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/package.json","includedInParent":true,"mtime":1638215579157},{"name":"is-observable","loc":{"line":16,"column":48},"parent":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/index.js","resolved":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/is-observable/index.js"},{"name":"../common","loc":{"line":21,"column":23},"parent":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/index.js","resolved":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/common.js"},{"name":"../transferable","loc":{"line":23,"column":29},"parent":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/index.js","resolved":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/transferable.js"},{"name":"../types/messages","loc":{"line":19,"column":27},"parent":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/index.js","resolved":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/types/messages.js"},{"name":"./implementation","loc":{"line":20,"column":49},"parent":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/index.js","resolved":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/implementation.browser.js"},{"name":"process","parent":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/threads/dist/worker/index.js","resolved":"/mnt/user-data/zac/aztec2-internal/barretenberg.js/node_modules/process/browser.js"}],"generated":{"js":"var process = require(\"process\");\nvar e=require(\"process\"),t=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,n){function i(e){try{u(s.next(e))}catch(t){n(t)}}function a(e){try{u(s.throw(e))}catch(t){n(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,a)}u((s=s.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.expose=exports.isWorkerRuntime=exports.Transfer=exports.registerSerializer=void 0;const s=r(require(\"is-observable\")),o=require(\"../common\"),n=require(\"../transferable\"),i=require(\"../types/messages\"),a=r(require(\"./implementation\"));var u=require(\"../common\");Object.defineProperty(exports,\"registerSerializer\",{enumerable:!0,get:function(){return u.registerSerializer}});var c=require(\"../transferable\");Object.defineProperty(exports,\"Transfer\",{enumerable:!0,get:function(){return c.Transfer}}),exports.isWorkerRuntime=a.default.isWorkerRuntime;let f=!1;const l=new Map,p=e=>e&&e.type===i.MasterMessageType.cancel,d=e=>e&&e.type===i.MasterMessageType.run,y=e=>s.default(e)||g(e);function g(e){return e&&\"object\"==typeof e&&\"function\"==typeof e.subscribe}function m(e){return n.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function b(){const e={type:i.WorkerMessageType.init,exposed:{type:\"function\"}};a.default.postMessageToMaster(e)}function h(e){const t={type:i.WorkerMessageType.init,exposed:{type:\"module\",methods:e}};a.default.postMessageToMaster(t)}function M(e,t){const{payload:r,transferables:s}=m(t),n={type:i.WorkerMessageType.error,uid:e,error:o.serialize(r)};a.default.postMessageToMaster(n,s)}function T(e,t,r){const{payload:s,transferables:o}=m(r),n={type:i.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:s};a.default.postMessageToMaster(n,o)}function x(e,t){const r={type:i.WorkerMessageType.running,uid:e,resultType:t};a.default.postMessageToMaster(r)}function v(e){try{const r={type:i.WorkerMessageType.uncaughtError,error:o.serialize(e)};a.default.postMessageToMaster(r)}catch(t){console.error(\"Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\\nLatest error:\",t,\"\\nOriginal error:\",e)}}function k(e,r,s){return t(this,void 0,void 0,function*(){let t;try{t=r(...s)}catch(i){return M(e,i)}const n=y(t)?\"observable\":\"promise\";if(x(e,n),y(t)){const r=t.subscribe(t=>T(e,!1,o.serialize(t)),t=>{M(e,o.serialize(t)),l.delete(e)},()=>{T(e,!0),l.delete(e)});l.set(e,r)}else try{const r=yield t;T(e,!0,o.serialize(r))}catch(i){M(e,o.serialize(i))}})}function W(e){if(!a.default.isWorkerRuntime())throw Error(\"expose() called in the master thread.\");if(f)throw Error(\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\");if(f=!0,\"function\"==typeof e)a.default.subscribeToMasterMessages(t=>{d(t)&&!t.method&&k(t.uid,e,t.args.map(o.deserialize))}),b();else{if(\"object\"!=typeof e||!e)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);a.default.subscribeToMasterMessages(t=>{d(t)&&t.method&&k(t.uid,e[t.method],t.args.map(o.deserialize))}),h(Object.keys(e).filter(t=>\"function\"==typeof e[t]))}a.default.subscribeToMasterMessages(e=>{if(p(e)){const t=e.uid,r=l.get(t);r&&(r.unsubscribe(),l.delete(t))}})}exports.expose=W,\"undefined\"!=typeof self&&\"function\"==typeof self.addEventListener&&a.default.isWorkerRuntime()&&(self.addEventListener(\"error\",e=>{setTimeout(()=>v(e.error||e),250)}),self.addEventListener(\"unhandledrejection\",e=>{const t=e.reason;t&&\"string\"==typeof t.message&&setTimeout(()=>v(t),250)})),void 0!==e&&\"function\"==typeof e.on&&a.default.isWorkerRuntime()&&(e.on(\"uncaughtException\",e=>{setTimeout(()=>v(e),250)}),e.on(\"unhandledRejection\",e=>{e&&\"string\"==typeof e.message&&setTimeout(()=>v(e),250)}));"},"sourceMaps":null,"error":null,"hash":"2fbd40547fd7e21e655f78e27676f7ea","cacheData":{"env":{}}}